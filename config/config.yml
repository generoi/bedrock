---
# This file should be kept without site specific overrides, place them in
# vagrant.config.yml. That way when Drupal VM updates are brought in, this file
# can be overriden without manual inspection.

vagrant_box: geerlingguy/drupal-vm
vagrant_box_version: 2.0.11

# Use DHCP assigned  IPs with vagrant-hostmanager
# Note: requires vagrant-vbguest to be disabled in Vagrantfile.local
vagrant_ip: dhcp
vagrant_plugins:
  - name: vagrant-hostmanager

# Needs to match with what we have in .env and vagrant_synced_folders.
drupal_core_path: "/var/www/wordpress/web"
drupal_domain: "{{ vagrant_hostname }}"
drupal_db_user: wordpress
drupal_db_password: wordpress
drupal_db_name: wordpress

# Disable Drupal specific features.
drupal_build_composer_project: false
drupal_composer_dependencies: []
drupal_install_site: false
configure_drush_aliases: false

drupalvm_webserver: nginx
nginx_vhost_template: "{{ config_dir }}/provisioning/nginx-vhost.conf.j2"

php_version: "7.4"
php_packages:
  - "php{{ php_version }}"
  - "php{{ php_version }}-apcu"
  - "php{{ php_version }}-cli"
  - "php{{ php_version }}-common"
  - "php{{ php_version }}-curl"
  - "php{{ php_version }}-dev"
  - "php{{ php_version }}-fpm"
  - "php{{ php_version }}-gd"
  - "php{{ php_version }}-imap"
  - "php{{ php_version }}-json" # Disable for PHP 8.0
  - "php{{ php_version }}-mbstring"
  - "php{{ php_version }}-opcache"
  - "php{{ php_version }}-sqlite3"
  - "php{{ php_version }}-xml"
  - "php{{ php_version }}-yaml"
php_xdebug_version: 3.0.4
nodejs_version: "14.x"

installed_extras:
  - adminer
  # - blackfire
  # - drupalconsole
  # - drush
  # - elasticsearch
  # - java
  - mailhog
  # - memcached
  # - newrelic
  - nodejs
  # - pimpmylog
  # - redis
  # - ruby
  # - selenium
  # - solr
  # - tideways
  # - upload-progress
  # - varnish
  - xdebug
  # - xhprof

# Add any extra apt or yum packages you would like installed.
extra_packages:
  - vim

composer_global_packages:
  - { name: wp-cli/wp-cli-bundle, release: '^2.0.0' }

post_provision_tasks_dir:
  - "{{ config_dir }}/../vendor/generoi/genero-conf/post-provisioning/tasks/dotfiles.yml"
  - "{{ config_dir }}/../vendor/generoi/genero-conf/post-provisioning/tasks/wp-directories.yml"
  - "{{ config_dir }}/../vendor/generoi/genero-conf/post-provisioning/tasks/ssh-config.yml"
  - "{{ config_dir }}/provisioning/ssh-config.yml"
